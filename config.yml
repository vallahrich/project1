recipe: default.v1
language: en

# Pipeline for processing user messages
pipeline:
- name: NLUCommandAdapter
  # Required for intent-based slot mappings
- name: CompactLLMCommandGenerator
  llm:
    provider: openai
    model: gpt-4o-2024-11-20
    request_timeout: 10
    max_tokens: 500
    temperature: 0.7
  minimize_num_calls: true
  prompt_template: prompts/custom_prompt_template.jinja2
# REMOVED FallbackClassifier - it's incompatible with IntentlessPolicy

# Policies for dialogue management
policies:
- name: FlowPolicy    # Handle Rasa Pro flow definitions
- name: IntentlessPolicy    # Support conversations without explicit intents
  nlu_abstention_threshold: 0.0  # Always let IntentlessPolicy handle
  prompt: prompts/intentless_prompt.jinja2  # Optional custom prompt
- name: RulePolicy    # Handle simple rules

# Model group for other LLM API access (in custom actions)
model_groups:
- id: openai-gpt4o
  models:
  - provider: openai
    model: gpt-4o-2024-11-20
    request_timeout: 10
    max_tokens: 500
    temperature: 0.7
assistant_id: 20250330-171212-feldspar-bit