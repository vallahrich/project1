version: "3.1"

intents:
  - reply_to_email
  - affirm
  - deny

slots:
  # Reply-related slots
  reply_stage:
    type: text
    influence_conversation: true
    mappings:
    - type: custom
  
  reply_type:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
    - type: from_llm
  
  user_input:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
  
  email_response:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
  
  review_option:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
    - type: from_llm
  
  # Confirmation slots
  confirm_sending:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: affirm
      value: true
    - type: from_intent
      intent: deny
      value: false
    - type: from_llm
  
  confirm_edited_draft:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: affirm
      value: true
    - type: from_intent
      intent: deny
      value: false
    - type: from_llm
  
  # Other utility slots
  custom_style:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
    - type: from_llm

responses:
  # Reply-related responses
  utter_ask_reply_type:
  - text: "How would you like me to draft your reply? You can say:\n1. Use my own words\n2. Draft a professional reply\n3. Create a casual reply\n4. Custom style (e.g., 'formal', 'concerned')"
  
  utter_ask_user_input:
  - text: "What would you like to say in your reply?"
  
  utter_ask_draft_options:
  - text: "Here's the draft I've created:\n\n{email_response}\n\nWhat would you like to do?\n1. Send as is\n2. Edit this draft\n3. Start over\n4. Cancel"
  
  utter_ask_for_edits:
  - text: "Please provide your edited version of the email:"
  
  utter_confirm_edited_draft:
  - text: "I've updated the draft with your edits:\n\n{email_response}"
  
  utter_ask_send_edited:
  - text: "Would you like to send this edited draft?"
  
  utter_ask_final_confirmation:
  - text: "Before I send this email, please confirm:\n\nThis reply will be sent to {current_email_sender} with the subject \"Re: {current_email_subject}\".\n\nWould you like to proceed with sending?"
  
  utter_email_sent:
  - text: "Great! Your email has been sent successfully."
  
  utter_email_not_sent:
  - text: "I've canceled sending the email."
  
  # Draft editing-related responses
  utter_ask_edited_draft_options:
  - text: "Would you like to:\n1. Send this draft\n2. Edit it further\n3. Start over\n4. Cancel"
  
  utter_ask_specific_edits:
  - text: "What specific changes would you like to make to the draft? Please be as clear as possible (e.g., 'change Monday to Wednesday', 'add my phone number', etc.)"
  
  utter_edit_applied:
  - text: "I've updated the draft based on your instructions:\n\n{email_response}\n\nDoes this look good now?"
  
  utter_editing_error:
  - text: "I'm having trouble understanding your editing instructions. Could you please be more specific about what you want to change?"

actions:
  # Reply actions
  - action_initiate_reply
  - action_generate_reply_draft
  - action_edit_reply_draft
  - action_send_reply